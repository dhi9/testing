<!-- start: PAGE TITLE -->
<div ng-controller="VehicleMasterEditController">  
    
	<section id="page-title" class="padding-top-15 padding-bottom-15" >
		<div class="row">
			<div class="col-sm-7">
				<h1 class="mainTitle">Atur Kendaraan ({{ vehicle.vehicle_plate }}) </h1>
			</div>
			<div ncy-breadcrumb></div>
		</div>
	</section>
<!-- end: PAGE TITLE -->

<!-- start: YOUR CONTENT HERE -->

	<div class="container-fluid container-fullw bg-white">
		<div class="row">
			<div class="col-md-12">
				<tabset class="tabbable">
					<tab heading="Detail Kendaraan">
						<form class="form-horizontal">
							<div class="row">
								<div class="col-md-7">
									<div class="form-group">
										<label for="txtAddress" class="col-sm-4 control-label">Vendor</label>
										<div class="col-sm-8">
											<select class="form-control" ng-model="vehicle.vendor_id" ng-options="vendor.vendor_id as vendor.vendor_name for vendor in vendorList"></select>
										</div>
									</div>
								</div>
								<div class="col-md-5">
									<div class="form-group">
										<label for="txtAddress" class="col-sm-5 control-label">Status</label>
										<div class="col-sm-7">
											<select class="form-control" ng-model="vehicle.status">
												<option value="A">Active</option>
												<option value="X">Not Active</option>
												<option value="S">Suspended</option>
											</select>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-7">
									<div class="form-group">
										<label for="txtAddress" class="col-sm-4 control-label">No Kendaraan</label>
										<div class="col-sm-8">
											<input type="text" class="form-control" ng-model="vehicle.vehicle_plate" disabled>
										</div>
									</div>
								</div>
								<div class="col-md-5">
									<div class="form-group">
										<label for="txtAddress" class="col-sm-5 control-label">Tipe Kendaraan</label>
										<div class="col-sm-7">
											<select class="form-control" ng-model="vehicle.vehicle_type_id">
												<!--<option value="{{vehicle.vehicle_type}}">{{type.vehicle_type[vehicle.vehicle_type]}}</option>-->
												<option value="{{type.vehicle_type_id}}" ng-repeat="type in vehicleType">{{type.vehicle_type}}</option>
											</select>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-7">
									<div class="form-group">
										<label for="txtAddress" class="col-sm-4 control-label">No KIR</label>
										<div class="col-sm-8">
											<input type="text" class="form-control" ng-model="vehicle.kir_number">
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<form class="form-horizontal ng-valid ng-dirty ng-valid-parse" role="form">
									<div class="col-md-12">
										<div class="form-group">
											<div class="panel-body">
												<label for="txtAddress" class="col-sm-2 control-label">Kemampuan</label>
												<!--<div class="col-sm-2">
													<div class="checkbox clip-check check-primary" ng-repeat="capList in capabilitiesList">
														<input type="checkbox" id="checkbox{{$index}}" ng-model="newVehicle.capabilities.+{{capList.code}}" class="ng-pristine ng-untouched ng-valid">
														<label for="checkbox{{$index}}">{{capList.label}}</label>
													</div>
												</div>
												-->
												<div class="col-sm-2">
													<div class="checkbox clip-check check-primary" ng-repeat="capList in capabilitiesList">
														<input type="checkbox" id="checkbox{{$index}}" ng-model="vehicle.cap[capList.code]" class="ng-pristine ng-untouched ng-valid">
														<label for="checkbox{{$index}}">{{capList.label}}</label>
													</div>
													<div>
														{{ $scope.vehicle.capabilities }}
													</div>
												</div>
												<label for="txtAddress" class="col-sm-2 control-label">Max Berat</label>
												<div class="col-sm-3">
													<input type="number" placeholder="0" string-to-number class="form-control" ng-model="vehicle.max_weight" style="padding-right: 3em;">
												</div>
												<label for="txtAddress" class="control-label" style="position: relative;left: -3em" >KG</label>
												<br><br>
												<label for="txtAddress" class="col-sm-2 control-label">Max Volume</label>
												<div class="col-sm-3">
													<input type="number" placeholder="0" string-to-number class="form-control" ng-model="vehicle.max_volume" style="padding-right: 3em;">
												</div>
												<label for="txtAddress" class="control-label" style="position: relative;left: -4em">CBM</label>
											</div>
										</div>
									</div>
								</form>
							</div>
							<div class="panel-white bg-white">
								<div class="panel-heading">
									<h4>Dokumentasi</h4>
								</div>
								<div class="panel-body">
									<div ng-controller="UploadCtrl2" nv-file-drop="" uploader="uploader" filters="queueLimit, customFilter">
										<div class="row">
											<div class="col-md-3">
												<div class="panel panel-white">
													<div class="panel-body">
														<div ng-show="uploader.isHTML5">
															<!-- 3. nv-file-over uploader="link" over-class="className" -->
															<div class="well my-drop-zone" nv-file-over="" uploader="uploader">
																Base drop zone
															</div>
															<!-- Example: nv-file-drop="" uploader="{Object}" options="{Object}" filters="{String}" 
															<div nv-file-drop="" uploader="uploader" options="{ url: '/foo' }">
																<div nv-file-over="" uploader="uploader" over-class="another-file-over-class" class="well my-drop-zone">
																	Another drop zone with its own settings
																</div>
															</div>-->
														</div>
														<!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" -->
														<span class="btn btn-primary btn-o btn-file margin-bottom-15"> Select multiple files
															<input type="file" nv-file-select="" uploader="uploader" multiple  />
														</span>
														<br/>
														<!--
														<span class="btn btn-primary btn-o btn-file"> Select single file
															<input type="file" nv-file-select="" uploader="uploader" />
														</span>
														-->
													</div>
												</div>
											</div>
											<div class="col-md-9" style="margin-bottom: 40px">
												<h4>Upload queue</h4>
												<div class="panel panel-transparent">
													<div class="panel-body">
														<div class="table-responsive">
															<table class="table">
																<thead>
																	<tr>
																		<th width="50%">Name</th>
																		<th ng-show="uploader.isHTML5">Size</th>
																		<th ng-show="uploader.isHTML5">Progress</th>
																		<th>Status</th>
																		<th>Actions</th>
																	</tr>
																</thead>
																<tbody>
																	<tr ng-repeat="item in uploader.queue">
																		<td><strong>{{ item.file.name }}</strong></td>
																		<td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
																		<td ng-show="uploader.isHTML5">
																		<div class="progress progress-xs margin-bottom-0">
																			<div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
																		</div></td>
																		<td class="text-center"><span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span><span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span><span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span></td>
																		<td nowrap>
																		<button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
																			<span class="glyphicon glyphicon-upload"></span> Upload
																		</button>
																		<button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
																			<span class="glyphicon glyphicon-ban-circle"></span> Cancel
																		</button>
																		<button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
																			<span class="glyphicon glyphicon-trash"></span> Remove
																		</button></td>
																	</tr>
																</tbody>
															</table>
														</div>
														<div>
															<div>
																Progress:
																<div class="progress progress-xs margin-top-5 margin-bottom-20">
																	<div class="progress-bar" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
																</div>
															</div>
															<button type="button" class="btn btn-primary btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">
																<span class="glyphicon glyphicon-upload"></span> Upload all
															</button>
															<button type="button" class="btn btn-primary btn-o  btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">
																<span class="glyphicon glyphicon-ban-circle"></span> Cancel all
															</button>
															<button type="button" class="btn btn-primary btn-o btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">
																<span class="glyphicon glyphicon-trash"></span> Remove all
															</button>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</form>
						<br>
						<button class="btn btn-alt btn-hover btn-primary" ng-click="updateVehicle()">
							<span>Simpan</span>
							<i class="glyph-icon icon-plus"></i>
						</button>
						<button class="btn btn-alt btn-hover btn-danger" ui-sref="app.master.vehicle">
							<span>Batal</span>
							<i class="glyph-icon icon-plus"></i>
						</button>
					</tab>
					<tab heading="Data Service">
						<div class="row">
							<div class="col-lg-12">
								<input type="text" class="form-control" ng-model="search.$" placeholder="Filter"/>
								<br/>
								<div class="table-responsive">
									<table class="table" ng-table="tableParams">
										<tr  ng:repeat="service in $data">
											<td data-title="'Nama Service'" sortable="'service_name'">{{ service.service_name }}</td>
											<td class="col-md-2" data-title="'Tanggal Service'" sortable="'training_date'">{{ service.service_date | date:'dd/MM/yyyy' }}</td>
											<td data-title="'Vendor'" sortable="'vendor_name'">{{ service.vendor_name }}</td>
											<td data-title="'Biaya'" sortable="'certificate'">{{ service.cost }}</td>
											<td class="col-md-1">
												<button class="btn btn-primary" ng-click="editServiceModal(service)">
													<span>Ubah</span>
													<i class="glyph-icon icon-close"></i>
												</button>
											</td>
										</tr>
									</table>
									<button class="btn btn-primary" ng-click="newServiceModal()">
										<span>Buat Baru</span>
										<i class="glyph-icon icon-close"></i>
									</button>
								</div>
							</div>
						</div>
					</tab>
				</tabset>
			</div>
		</div>
	</div>
	<script type="text/ng-template" id="new_service_modal">
		<div class="modal-header">
			<h3 class="modal-title">Tambah Service Baru</h3>
		</div>
		<div class="modal-body bg-white">
			<div class="panel-white bg-white">
				<div class="panel-body">
					<form class="form-horizontal">
						<div class="row">
							<div class="col-md-12">
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Nama Service</label>
									<div class="col-sm-8">
										<input type="text" class="form-control" ng-model="item.service_name">
									</div>
								</div>
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Tanggal Service</label>
									<div class="col-sm-3">
										<input type="date" class="form-control" ng-model="item.service_date" max="{{ getCurrentDateString() }}" />
									</div>
								</div>
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Vendor</label>
									<div class="col-sm-8">
										<select class="form-control" ng-model="item.vendor_id" ng-options="vendor.vendor_id as vendor.vendor_name for vendor in vendorList"></select>
									</div>
								</div>
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Biaya</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" ng-model="item.cost">
									</div>
								</div>
							</div>
						</div>
					</form>
					<br>
				</div>
			</div>	
			<br>
			<button class="btn btn-alt btn-hover btn-primary" ng-click="newVehicleService({{vehicle.vehicle_id}})">
				<span>Simpan</span>
				<i class="glyph-icon icon-plus"></i>
			</button>
			<button class="btn btn-alt btn-hover btn-danger" ng-click="closeModal()">
				<span>Batal</span>
				<i class="glyph-icon icon-plus"></i>
			</button>
		</div>
	</script>
	<script type="text/ng-template" id="edit_service_modal">
		<div class="modal-header">
			<h3 class="modal-title">Ubah Service</h3>
		</div>
		<div class="modal-body bg-white">
			<div class="panel-white bg-white">
				<div class="panel-body">
					<form class="form-horizontal">
						<div class="row">
							<div class="col-md-12">
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Nama Service</label>
									<div class="col-sm-8">
										<input type="text" class="form-control" ng-model="service.service_name" disabled>
									</div>
								</div>
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Tanggal Service</label>
									<div class="col-sm-3">
										<input type="date" class="col-sm-12" name="input" ng-model="service.service_date" max="{{ getCurrentDateString() }}"/>
									</div>
								</div>
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Vendor</label>
									<div class="col-sm-8">
										<select class="form-control" ng-model="service.vendor_id" ng-options="vendor.vendor_id as vendor.vendor_name for vendor in vendorList"></select>
									</div>
								</div>
								<div class="form-group">
									<label for="txtAddress" class="col-sm-2 control-label">Biaya</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" ng-model="service.cost">
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			<br>
			<button class="btn btn-alt btn-hover btn-primary" ng-click="updateVehicleService()">
				<span>Simpan</span>
				<i class="glyph-icon icon-plus"></i>
			</button>
			<button class="btn btn-alt btn-hover btn-danger" ng-click="closeModal()">
				<span>Batal</span>
				<i class="glyph-icon icon-plus"></i>
			</button>
		</div>
	</script>
</div>

<!-- end: YOUR CONTENT HERE -->
