<!-- start: PAGE TITLE -->
<section id="page-title" class="padding-top-15 padding-bottom-15" >
	<div class="row">
		<div class="col-sm-7">
			<h1 class="mainTitle">Daftar User</h1>
		</div>
		<div ncy-breadcrumb></div>
	</div>
</section>
<!-- end: PAGE TITLE -->

<!-- start: YOUR CONTENT HERE -->

<div ng-controller="UserMasterController">  

	<div class="container-fluid container-fullw bg-white">
		<div class="row">
			<div class="col-md-12">
				<div ng-show="table_loading">Loading...</div>
				<div ng-show="!table_loading">
					<input type="text" class="form-control" id="txtSearchTable" ng-model="search.$" placeholder="Filter"/>
					<br/>
					<div class="table-responsive">
						<table class="table" ng-table="tableParams">
							<tr ng:repeat="user in $data | filter: search">
								<td class="col-md-9" data-title="'Username'" sortable="'username'">
									{{ user.username }}
									<span class="pull-right">
										<button class="btn btn-primary" ng-click="displaySetAccessModal(user)">
											<span>Atur Akses</span>
											<i class="glyph-icon icon-close"></i>
										</button>
										<button class="btn btn-primary" ng-click="displaySetDepartmentModal(user)">
											<span>Sales Department</span>
											<i class="glyph-icon icon-close"></i>
										</button>
										<button class="btn btn-primary" ng-click="displayResetPasswordModal(user)">
											<span>Reset Password</span>
											<i class="glyph-icon icon-close"></i>
										</button>
									</span>
								</td>
							</tr>
						</table>
					</div>
				</div>
				<button class="btn btn-primary" ng-show="!createNewUserPanel" ng-click="createNewUserPanel = true">
					<span>Buat User Baru</span>
					<i class="glyph-icon icon-close"></i>
				</button>
				<div class="panel panel-white" id="pnlCustomerDetail" ng-show="createNewUserPanel">
					<div class="panel-heading border-light">
						<h4 class="panel-title text-primary">Buat User Baru</h4>
						<ct-paneltool class="panel-tools" tool-collapse="tool-collapse"></ct-paneltool>
					</div>
					<div collapse="pnlCustomerDetail" ng-init="pnlCustomerDetail=false" class="panel-wrapper">
						<div class="panel-body">
							<form role="form" class="form-horizontal" ng-submit="insertNewUser(newUser)">
								<div class="form-group">
									<label class="col-sm-2 control-label" for="inputEmail3">Username</label>
									<div class="col-sm-10">
										<input type="text" placeholder="Username" id="inputEmail3" class="form-control" ng-model="newUser.username">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label" for="inputEmail3">Password</label>
									<div class="col-sm-10">
										<input type="password" placeholder="Password" id="inputEmail3" class="form-control" ng-model="newUser.password">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label" for="inputEmail3">Ulangi Password</label>
									<div class="col-sm-10">
										<input type="password" placeholder="Ulangi Password" id="inputEmail3" class="form-control" ng-model="newUser.repeatedPassword">
									</div>
								</div>
								<button type="submit" class="btn btn-primary">Simpan</button>
								<button type="button" class="btn btn-danger" ng-click="createNewUserPanel = false">Batal</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<script type="text/ng-template" id="modal_reset_password">
		<div class="modal-header">
			<h3 class="modal-title">Reset Password</h3>
		</div>
		<div class="modal-body bg-white">
			<form role="form" class="form-horizontal" ng-submit="resetPassword(user)">
				<div class="form-group">
					<label class="col-sm-3 control-label" for="inputEmail3">Username</label>
					<div class="col-sm-9">
						<input type="text" value="{{user.username}}" id="inputEmail3" class="form-control" readonly>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="inputEmail3">Password Baru</label>
					<div class="col-sm-9">
						<input type="password" placeholder="Password" id="inputEmail3" class="form-control" ng-model="user.password">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="inputEmail3">Ulangi Password Baru</label>
					<div class="col-sm-9">
						<input type="password" placeholder="Ulangi Password" id="inputEmail3" class="form-control" ng-model="user.repeatedPassword">
					</div>
				</div>
				<button type="submit" class="btn btn-primary">Simpan</button>
				<button type="button" class="btn btn-danger" ng-click="closeModal()">Batal</button>
			</form>
		</div>
	</script>
	
	<script type="text/ng-template" id="modal_set_access">
		<div class="modal-header">
			<h3 class="modal-title">Atur Akses</h3>
		</div>
		<div class="modal-body bg-white">
			<form role="form" class="form-horizontal" ng-submit="setAccess()">
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox1" ng-model="user.access.CUSTOMERSERVICE">
					<label for="checkbox1">Customer Service</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox2" ng-model="user.access.FLEETMANAGER">
					<label for="checkbox2">Fleet Manager</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox3" ng-model="user.access.ADMIN">
					<label for="checkbox3">Admin</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox4" ng-model="user.access.SPECIALREQUEST">
					<label for="checkbox4">Special Request</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox5" ng-model="user.access.REPORT">
					<label for="checkbox5">Report</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox6" ng-model="user.access.SALESAPPROVER">
					<label for="checkbox6">Sales Approver</label>
				</div>
				<br/>
				<button type="submit" class="btn btn-primary">Simpan</button>
				<button type="button" class="btn btn-danger" ng-click="closeModal()">Batal</button>
			</form>
		</div>
	</script>
	
	<script type="text/ng-template" id="modal_set_department">
		<div class="modal-header">
			<h3 class="modal-title">Atur Departemen</h3>
		</div>
		<div class="modal-body bg-white">
			<form role="form" class="form-horizontal" ng-submit="setDepartment()">
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox1" ng-model="user.department.BUSA">
					<label for="checkbox1">BUSA</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox2" ng-model="user.department.SUPERLAND">
					<label for="checkbox2">SUPERLAND</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox3" ng-model="user.department.CHARIS">
					<label for="checkbox3">CHARIS</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox4" ng-model="user.department.THERASPINE">
					<label for="checkbox4">THERASPINE</label>
				</div>
				<div class="checkbox clip-check check-primary">
					<input type="checkbox" id="checkbox5" ng-model="user.department.CUSHION">
					<label for="checkbox5">CUSHION</label>
				</div>
				<br/>
				<button type="submit" class="btn btn-primary">Simpan</button>
				<button type="button" class="btn btn-danger" ng-click="closeModal()">Batal</button>
			</form>
		</div>
	</script>

</div>

<!-- end: YOUR CONTENT HERE -->
